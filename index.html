<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Score Calculator</title>
    <!-- Include Bootstrap CSS for styling -->
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        padding: 20px;
      }
      .container {
        max-width: 600px;
      }
      .error {
        color: red;
        font-size: 0.875rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2 class="text-center">Final Score & CGPA Calculator</h2>

      <div class="form-group">
        <label for="discussion_score">Discussion Score</label>
        <input
          type="number"
          id="discussion_score"
          class="form-control"
          placeholder="Enter Discussion Score"
          required
        />
        <small id="discussion_error" class="error"></small>
      </div>

      <div class="form-group">
        <label for="assignment_score">Assignment Score</label>
        <input
          type="number"
          id="assignment_score"
          class="form-control"
          placeholder="Enter Assignment Score"
          required
        />
        <small id="assignment_error" class="error"></small>
      </div>

      <div class="form-group">
        <label for="quiz_score">Graded Quizzes Score</label>
        <input
          type="number"
          id="quiz_score"
          class="form-control"
          placeholder="Enter Graded Quizzes Score"
          required
        />
        <small id="quiz_error" class="error"></small>
      </div>

      <div class="form-group">
        <label for="final_exam_score">Final Exam Score</label>
        <input
          type="number"
          id="final_exam_score"
          class="form-control"
          placeholder="Enter Final Exam Score"
          required
        />
        <small id="final_exam_error" class="error"></small>
      </div>

      <button class="btn btn-primary btn-block" onclick="calculateScore()">
        Calculate Final Score & CGPA
      </button>

      <h3 class="mt-3 text-center" id="final_score_display"></h3>
      <h4 class="mt-3 text-center" id="grade_display"></h4>
      <h4 class="mt-3 text-center" id="cgpa_display"></h4>
    </div>

    <!-- Include Bootstrap JS and jQuery for interactivity -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
      // Function to display the real-time validation messages
      function validateInput(inputId, errorId) {
        const inputElement = document.getElementById(inputId);
        const errorElement = document.getElementById(errorId);

        // If the input value is greater than 100, show an error message
        if (inputElement.value > 100) {
          errorElement.innerText = "Score cannot be greater than 100!";
        } else {
          errorElement.innerText = ""; // Clear error message if valid
        }
      }

      // Event listeners for real-time input validation
      document
        .getElementById("discussion_score")
        .addEventListener("input", function () {
          validateInput("discussion_score", "discussion_error");
        });
      document
        .getElementById("assignment_score")
        .addEventListener("input", function () {
          validateInput("assignment_score", "assignment_error");
        });
      document
        .getElementById("quiz_score")
        .addEventListener("input", function () {
          validateInput("quiz_score", "quiz_error");
        });
      document
        .getElementById("final_exam_score")
        .addEventListener("input", function () {
          validateInput("final_exam_score", "final_exam_error");
        });

      // Function to calculate the final score and CGPA
      function calculateScore() {
        // Get input values
        let discussion_score = parseFloat(
          document.getElementById("discussion_score").value
        );
        let assignment_score = parseFloat(
          document.getElementById("assignment_score").value
        );
        let quiz_score = parseFloat(
          document.getElementById("quiz_score").value
        );
        let final_exam_score = parseFloat(
          document.getElementById("final_exam_score").value
        );

        // Ensure no input is greater than 100 and values are valid
        if (
          isNaN(discussion_score) ||
          isNaN(assignment_score) ||
          isNaN(quiz_score) ||
          isNaN(final_exam_score)
        ) {
          alert("Please fill in all the fields.");
          return;
        }

        if (
          discussion_score < 0 ||
          discussion_score > 100 ||
          assignment_score < 0 ||
          assignment_score > 100 ||
          quiz_score < 0 ||
          quiz_score > 100 ||
          final_exam_score < 0 ||
          final_exam_score > 100
        ) {
          alert("Scores must be between 0 and 100.");
          return;
        }

        // Weights for each component
        let discussion_weight = 0.25;
        let assignment_weight = 0.4;
        let quiz_weight = 0.2;
        let final_exam_weight = 0.15;

        // Calculate the final score
        let final_score =
          discussion_score * discussion_weight +
          assignment_score * assignment_weight +
          quiz_score * quiz_weight +
          final_exam_score * final_exam_weight;

        // Display the final score
        document.getElementById(
          "final_score_display"
        ).innerText = `Your final score is: ${final_score.toFixed(2)}`;

        // Grade Calculation
        let grade_point = getGradePoint(final_score);
        let grade = getGrade(final_score);

        // Display the grade
        document.getElementById(
          "grade_display"
        ).innerText = `Your grade is: ${grade}`;

        // CGPA Calculation
        let cgpa = calculateCGPA(grade_point);
        document.getElementById(
          "cgpa_display"
        ).innerText = `Your CGPA is: ${cgpa.toFixed(2)}`;
      }

      function getGradePoint(score) {
        // Calculate grade point based on the score
        if (score >= 98) return 4.0; // A+
        if (score >= 93) return 4.0; // A
        if (score >= 90) return 3.67; // A-
        if (score >= 88) return 3.33; // B+
        if (score >= 83) return 3.0; // B
        if (score >= 80) return 2.67; // B-
        if (score >= 78) return 2.33; // C+
        if (score >= 73) return 2.0; // C
        if (score >= 70) return 1.67; // C-
        if (score >= 68) return 1.33; // D+
        if (score >= 63) return 1.0; // D
        return 0.0; // F
      }

      function getGrade(score) {
        // Calculate grade based on the score
        if (score >= 98) return "A+";
        if (score >= 93) return "A";
        if (score >= 90) return "A-";
        if (score >= 88) return "B+";
        if (score >= 83) return "B";
        if (score >= 80) return "B-";
        if (score >= 78) return "C+";
        if (score >= 73) return "C";
        if (score >= 70) return "C-";
        if (score >= 68) return "D+";
        if (score >= 63) return "D";
        return "F";
      }

      function calculateCGPA(grade_point) {
        // Assuming only one subject, CGPA is equal to the grade point.
        return grade_point;
      }
    </script>
  </body>
</html>
